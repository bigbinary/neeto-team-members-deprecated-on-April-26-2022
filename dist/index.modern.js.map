{"version":3,"file":"index.modern.js","sources":["../src/apis/users.js","../src/components/Common/Container.js","../src/components/Common/index.js","../src/components/Common/SubNavBar.jsx","../src/components/Members/Table.jsx","../src/hooks/validator.js","../src/hooks/useValidation.js","../src/components/Members/CreateMemberForm.jsx","../src/components/Members/CreateMember.jsx","../src/components/Members/index.jsx"],"sourcesContent":["import axios from \"axios\";\n\nconst users = \"/api/v1/users\";\n\n// Creates a team user\nexport const createTeamMember = payload => {\n  return axios.post(users, payload);\n};\n\n//Get all active team members\nexport const getActiveMembers = () => {\n  return axios.get(`${users}?active=true`);\n};\n\n//Get all inactive team members\nexport const getInactiveMembers = () => {\n  return axios.get(`${users}?inactive=true`);\n};\n\n//Update status of a team member\nexport const setActivationStatus = (id, status) => {\n  return axios.put(`${users}/${id}?active=${status}`);\n};\n","import React from \"react\";\n\nconst Container = ({ children }) => {\n  return <div className=\"w-full overflow-y-hidden bg-white\">{children}</div>;\n};\n\nexport default Container;\n","import { Toastr } from \"@bigbinary/neetoui\";\nimport * as R from \"ramda\";\n\nexport const showToastrError = errorObj => {\n  let message;\n\n  if (typeof errorObj === \"string\") {\n    message = errorObj;\n  } else if (Array.isArray(errorObj)) {\n    message = R.join(\"\\n\", errorObj);\n  } else if (Array.isArray(errorObj?.errors)) {\n    message = R.join(\"\\n\", errorObj.errors);\n  } else if (errorObj?.data && errorObj?.data?.error) {\n    message = errorObj.data.error;\n  } else if (errorObj?.data && errorObj?.data?.errors) {\n    message = R.join(\"\\n\", errorObj.data.errors);\n  } else {\n    message = \"Something went wrong\";\n  }\n  Toastr.error({ error: message });\n};\n\nexport const showToastrInfo = message => {\n  Toastr.info(message);\n};\n\nexport const showToastrSuccess = message => {\n  Toastr.success(message);\n};\n\nexport const isPresent = R.compose(R.not, R.isEmpty);\n\nexport const checkValid = (obj, isError = false) => {\n  let isValidArr = false;\n  if (isError) {\n    isValidArr = Object.values(obj).some(\n      currentError => currentError.length !== 0\n    );\n  } else {\n    isValidArr = Object.values(obj).every(\n      currentValue => currentValue.length !== 0\n    );\n  }\n  return isValidArr;\n};\n\nexport const getConfigState = (initialState, config) => {\n  let clonedState = R.clone(initialState);\n  for (let field in config) {\n    if (config[field]) {\n      clonedState = {\n        ...clonedState,\n        [field]: field == \"prefix\" ? \"Mr\" : \"\",\n        error: { ...clonedState.error, [field]: \"\" },\n      };\n    } else {\n      delete clonedState[field];\n      delete clonedState.error[field];\n    }\n  }\n  return clonedState;\n};\n\nexport const getEmbedCode = formUrl => {\n  return `\n    <script src=\"http://${window.location.host}/javascript/embed.js\"></script>\n    <script>\n      window.addEventListener('DOMContentLoaded', function () {\n        window.neetoForm.embed('YOUR_BUTTON_ID', '${formUrl}')\n      })\n    </script>\n  `;\n};\n","import React from \"react\";\n\nimport { Tab } from \"@bigbinary/neetoui\";\n\nconst SubNavBar = ({ activeTab, setActiveTab, tabs }) => {\n  return (\n    <Tab className=\"mb-2\">\n      {tabs.map((tab, index) => (\n        <Tab.Item\n          key={index}\n          onClick={() => setActiveTab(tab.value)}\n          icon={tab.icon}\n          active={tab.value === activeTab}\n        >\n          {tab.label}\n        </Tab.Item>\n      ))}\n    </Tab>\n  );\n};\n\nexport default SubNavBar;\n","import React, { Fragment } from \"react\";\nimport { Button, Avatar, Tooltip, PageLoader } from \"@bigbinary/neetoui\";\n\nconst UsersTable = ({ loading, userData, handleStatusChange }) => {\n  return (\n    <Fragment>\n      {!loading ? (\n        <>\n          {!userData ? (\n            <p className=\"p-6 text-gray\">No team members</p>\n          ) : (\n            <table className=\"nui-table nui-table--avatar nui-table--hover nui-table--actions\">\n              <tbody>\n                {userData.map(user => {\n                  const fullName = `${user.first_name} ${user.last_name}`;\n                  const userRole = user.role;\n                  return (\n                    <tr key={user.id}>\n                      <td>\n                        <div className=\"flex flex-row items-center justify-start text-gray-800\">\n                          <Avatar\n                            size={32}\n                            className=\"mr-3\"\n                            contact={{ name: fullName }}\n                          />\n                          {fullName}\n                        </div>\n                      </td>\n                      <td>\n                        <div className=\"flex flex-row items-center justify-center\">\n                          {!user.active && userRole !== \"super_admin\" && (\n                            <Tooltip content=\"Activate\" position=\"bottom\">\n                              <Button\n                                style=\"icon\"\n                                icon=\"ri-shield-line ri-lg\"\n                                onClick={e => {\n                                  e.stopPropagation();\n                                  handleStatusChange(user?.id, \"true\");\n                                }}\n                              />\n                            </Tooltip>\n                          )}\n                          {user.active && userRole !== \"super_admin\" && (\n                            <Tooltip content=\"Deactivate\" position=\"bottom\">\n                              <Button\n                                style=\"icon\"\n                                icon=\"ri-shield-check-line ri-lg\"\n                                onClick={e => {\n                                  e.stopPropagation();\n                                  handleStatusChange(user?.id, \"false\");\n                                }}\n                              />\n                            </Tooltip>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          )}\n        </>\n      ) : (\n        <div className=\"w-full h-60\">\n          <PageLoader />\n        </div>\n      )}\n    </Fragment>\n  );\n};\n\nexport default UsersTable;\n","// Global config for validate.js\n\nimport validate from \"validate.js\";\nimport * as R from \"ramda\";\n\nvalidate.validators.array = (arrayItems, itemConstraints) => {\n  const arrayItemErrors = arrayItems.reduce((errors, item, index) => {\n    const error = validate(item, itemConstraints);\n    if (error) errors[index] = error;\n\n    return errors;\n  }, {});\n\n  return R.isEmpty(arrayItemErrors) ? null : { errors: arrayItemErrors };\n};\n\nexport default class Validator {\n  constructor(constraints) {\n    this.constraints = constraints;\n    this.validator = validate;\n    this.validator.options = { fullMessages: false };\n    this.validator.validators.presence.options = { allowEmpty: false };\n  }\n\n  validateState(payload, vldtnSchema = null) {\n    let schema = vldtnSchema || this.constraints;\n    const errors = this.validator(payload, schema) || {};\n\n    return {\n      isValid: R.isEmpty(errors),\n      errors: errors,\n    };\n  }\n\n  validateField(name, value) {\n    return this.validator.single(value, this.constraints[name]);\n  }\n}\n","import { useState, useEffect } from \"react\";\nimport Validator from \"./validator\";\nimport * as R from \"ramda\";\n\nconst useValidation = (\n  validationSchema,\n  formStateValues,\n  serverErrors = \"\"\n) => {\n  const [errors, setErrors] = useState(serverErrors);\n  const [isValidating, setIsValidating] = useState(false);\n  const [scrollToDirty, setScrollToDirty] = useState(false);\n  const validator = new Validator(validationSchema);\n\n  useEffect(() => {\n    if (scrollToDirty) {\n      setScrollToDirty(false);\n      let errorElement = document.querySelector(\"span.error\");\n      if (errorElement) {\n        errorElement.parentElement.scrollIntoView();\n      }\n    }\n  }, [scrollToDirty]);\n\n  useEffect(() => {\n    setErrors(serverErrors);\n  }, [serverErrors]);\n\n  const handleSubmit = (event, successCallback) => {\n    event.preventDefault();\n\n    if (!isValidating) setIsValidating(true);\n\n    const form = validator.validateState(formStateValues);\n    setErrors(form.errors);\n\n    if (form.isValid) {\n      successCallback(formStateValues);\n    } else {\n      setScrollToDirty(true);\n    }\n  };\n\n  const validateField = (\n    name,\n    value,\n    forceValidate = false,\n    successCallback = null\n  ) => {\n    const newErrors = validator.validateField(name, value);\n    setErrors({ ...errors, [name]: newErrors });\n\n    if (successCallback && R.not(newErrors)) successCallback({ [name]: value });\n\n    if (!isValidating && forceValidate) setIsValidating(true);\n  };\n\n  const resetValidation = () => {\n    setIsValidating(false);\n    setErrors(null);\n  };\n\n  const validateForm = () => {\n    if (!isValidating) setIsValidating(true);\n    const form = validator.validateState(formStateValues);\n    setErrors(form.errors);\n    return form.isValid;\n  };\n\n  return {\n    errors,\n    validateField,\n    handleSubmit,\n    resetValidation,\n    validateForm,\n  };\n};\n\nexport default useValidation;\n","import * as R from \"ramda\";\nimport React, { useState, Fragment } from \"react\";\nimport { Button, Input, Label, Switch } from \"@bigbinary/neetoui\";\n\nimport useValidation from \"../../hooks/useValidation\";\n\nconst CreateMemberForm = ({\n  onSubmit,\n  onCancel,\n  isInvited = false,\n  submitting,\n}) => {\n  const validationSchema = {\n    first_name: { presence: { message: \"First name is required\" } },\n    last_name: { presence: { message: \"Last name is required\" } },\n    email: {\n      email: true,\n    },\n  };\n\n  const [formValues, setFormValues] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    invite_status: \"pending\",\n  });\n\n  const { errors, handleSubmit, validateField } = useValidation(\n    validationSchema,\n    formValues\n  );\n\n  const handleFormChange = (attributeName, attributeValue) => {\n    const newFormValues = R.clone(formValues);\n    newFormValues[attributeName] = attributeValue;\n    setFormValues(newFormValues);\n    validateField(attributeName, attributeValue);\n  };\n\n  return (\n    <Fragment>\n      <div className=\"flex flex-row space-x-3 mb-3\">\n        <Input\n          required\n          autoFocus={true}\n          label=\"First Name\"\n          name=\"organization_user[first_name]\"\n          value={formValues.first_name}\n          onChange={event => handleFormChange(\"first_name\", event.target.value)}\n          error={errors.first_name}\n        />\n        <Input\n          required\n          label=\"Last Name\"\n          name=\"organization_user[last_name]\"\n          value={formValues.last_name}\n          onChange={event => handleFormChange(\"last_name\", event.target.value)}\n          error={errors.last_name}\n        />\n      </div>\n      <div className=\"mb-8\">\n        <Input\n          required\n          label=\"Email\"\n          name=\"organization_user[email]\"\n          value={formValues.email}\n          onChange={event => handleFormChange(\"email\", event.target.value)}\n          error={errors.email}\n        />\n      </div>\n      <div className=\"flex flex-row items-center justify-between\">\n        <div className=\"flex flex-col items-baseline justify-start\">\n          <Label className=\"mb-1\">Invite Email</Label>\n          <p className=\"text-xs font-normal leading-4 text-gray-500\">\n            {isInvited\n              ? \"An invite email has been already sent\"\n              : \"An invite can be sent later if you are not ready\"}\n          </p>\n        </div>\n\n        {isInvited ? (\n          // <Button label=\"Resend\" style=\"link\" onClick={resendInvitation} />\n          <Button label=\"Resend\" style=\"link\" />\n        ) : (\n          <Switch\n            checked={formValues.invite_status === \"pending\" ? true : false}\n            onChange={() => {\n              handleFormChange(\n                \"invite_status\",\n                formValues.invite_status === \"pending\"\n                  ? \"not_invited\"\n                  : \"pending\"\n              );\n            }}\n          />\n        )}\n      </div>\n\n      <div className=\"nui-pane__footer nui-pane__footer--absolute\">\n        <Button\n          onClick={onCancel}\n          label=\"Cancel\"\n          size=\"large\"\n          style=\"secondary\"\n        />\n\n        <Button\n          onClick={e => handleSubmit(e, onSubmit)}\n          type=\"submit\"\n          label=\"Submit\"\n          size=\"large\"\n          style=\"primary\"\n          className=\"ml-2\"\n          loading={submitting}\n        />\n      </div>\n    </Fragment>\n  );\n};\n\nexport default CreateMemberForm;\n","import React, { useState, Fragment } from \"react\";\nimport { Pane } from \"@bigbinary/neetoui\";\nimport { createTeamMember } from \"../../apis/users\";\nimport { showToastrError, showToastrSuccess } from \"../Common\";\n\nimport CreateMemberForm from \"./CreateMemberForm\";\n\nconst CreateMember = ({ isOpen, setReloadUsers, onClose }) => {\n  const [submitting, setSubmitting] = useState(false);\n\n  async function createUser(payload) {\n    setSubmitting(true);\n    try {\n      let response = await createTeamMember({ user: payload });\n      showToastrSuccess(response.data.notice);\n      setReloadUsers(true);\n      setSubmitting(false);\n      onClose();\n    } catch (err) {\n      setSubmitting(false);\n      showToastrError(err);\n    }\n  }\n\n  return (\n    <Fragment>\n      <Pane title={\"Add user\"} isOpen={isOpen} onClose={onClose}>\n        <div className=\"px-6\">\n          <CreateMemberForm\n            onSubmit={createUser}\n            onCancel={onClose}\n            submitting={submitting}\n          />\n        </div>\n      </Pane>\n    </Fragment>\n  );\n};\n\nexport default CreateMember;\n","import React, { useState, useEffect, Fragment } from \"react\";\nimport { MainLayout, Header } from \"@bigbinary/neetoui/layouts\";\nimport { PageLoader, Button } from \"@bigbinary/neetoui\";\nimport {\n  getActiveMembers,\n  getInactiveMembers,\n  setActivationStatus,\n} from \"../../apis/users\";\nimport Container from \"../Common/Container\";\nimport { showToastrError, showToastrSuccess } from \"../Common\";\nimport SubNavBar from \"../Common/SubNavBar\";\nimport Table from \"./Table\";\nimport CreateMember from \"./CreateMember\";\n\nconst Members = () => {\n  const [users, setUsers] = useState([]);\n  const [reloadMembers, setReloadMembers] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"active\");\n  const [loading, setLoading] = useState(false);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n\n  const TABS = [\n    { label: \"Active Members\", value: \"active\" },\n    { label: \"Inactive Members\", value: \"inactive\" },\n  ];\n\n  const currentMemberFetch = {\n    active: getActiveMembers,\n    inactive: getInactiveMembers,\n  }[activeTab];\n\n  const loadMembers = async () => {\n    setLoading(true);\n    try {\n      const response = await currentMemberFetch();\n      setUsers(response.data);\n      setLoading(false);\n    } catch (error) {\n      showToastrError(error);\n    }\n  };\n\n  const handleStatusChange = async (id, active) => {\n    try {\n      const response = await setActivationStatus(id, active);\n      const user = response.data;\n      const status = user.active ? \"active\" : \"inactive\";\n      setActiveTab(status);\n      showToastrSuccess(response.data.notice);\n    } catch (err) {\n      showToastrError(err);\n    }\n  };\n\n  useEffect(() => {\n    loadMembers();\n    setReloadMembers(false);\n  }, [activeTab, reloadMembers]);\n\n  return (\n    <Fragment>\n      <MainLayout>\n        {() => (\n          <Container>\n            <Header\n              title=\"Members\"\n              actionBlock={\n                <Button\n                  icon=\"ri-add-line\"\n                  label=\"Add a Member\"\n                  onClick={() => setShowCreateForm(true)}\n                />\n              }\n            />\n            <div className=\"w-full bg-white\">\n              <div className=\"p-6 bg-white nf-scrollable-container\">\n                <div\n                  className=\"flex flex-row flex-wrap items-start justify-start\"\n                  data-cy=\"forms\"\n                >\n                  <SubNavBar\n                    tabs={TABS}\n                    activeTab={activeTab}\n                    setActiveTab={setActiveTab}\n                  />\n                  {loading ? (\n                    <div className=\"w-full h-60\">\n                      <PageLoader />\n                    </div>\n                  ) : (\n                    <Table\n                      loading={loading}\n                      userData={users}\n                      handleStatusChange={handleStatusChange}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n          </Container>\n        )}\n      </MainLayout>\n      {showCreateForm && (\n        <CreateMember\n          isOpen={showCreateForm}\n          setReloadUsers={setReloadMembers}\n          onClose={() => setShowCreateForm(false)}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport default Members;\n"],"names":["users","createTeamMember","payload","axios","post","getActiveMembers","get","getInactiveMembers","setActivationStatus","id","status","put","Container","children","showToastrError","errorObj","message","Array","isArray","R","errors","data","error","Toastr","showToastrSuccess","success","isPresent","SubNavBar","activeTab","setActiveTab","tabs","map","tab","index","value","icon","label","UsersTable","loading","userData","handleStatusChange","user","fullName","first_name","last_name","userRole","role","name","active","e","stopPropagation","validate","validators","array","arrayItems","itemConstraints","arrayItemErrors","reduce","item","Validator","constructor","constraints","validator","options","fullMessages","presence","allowEmpty","validateState","vldtnSchema","schema","isValid","validateField","single","useValidation","validationSchema","formStateValues","serverErrors","setErrors","useState","isValidating","setIsValidating","scrollToDirty","setScrollToDirty","useEffect","errorElement","document","querySelector","parentElement","scrollIntoView","handleSubmit","event","successCallback","preventDefault","form","forceValidate","newErrors","resetValidation","validateForm","CreateMemberForm","onSubmit","onCancel","isInvited","submitting","email","formValues","setFormValues","invite_status","handleFormChange","attributeName","attributeValue","newFormValues","target","CreateMember","isOpen","setReloadUsers","onClose","setSubmitting","createUser","response","notice","err","Members","setUsers","reloadMembers","setReloadMembers","setLoading","showCreateForm","setShowCreateForm","TABS","currentMemberFetch","inactive","loadMembers","Table"],"mappings":"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"}